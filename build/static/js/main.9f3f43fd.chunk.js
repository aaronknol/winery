(this.webpackJsonpwinery=this.webpackJsonpwinery||[]).push([[0],{30:function(e,t,a){e.exports=a(52)},35:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(20),l=a.n(c),i=(a(35),a(5)),m=a(21),o=a(22),s=a(28),u=a(23),p=a(29),d=a(56),E=a(58),h=a(55),f=a(24),b=a.n(f),v=a(25),w=a.n(v).a.initializeApp({apiKey:"AIzaSyAg0DoA_SSJp5uPodDYIXURXeVxQ1psk08",authDomain:"winery-fd3ae.firebaseapp.com",databaseURL:"https://winery-fd3ae.firebaseio.com"}),g=b.a.createClass(w.database()),y=a(11),O=a(57);var j=function(e){var t=Array.from(Array(parseInt(e.numberOfStars,10)).keys()),a=function(t){var a=t.target.value;e.onClick(a)};return Object.keys(t).map((function(t){return r.a.createElement(n.Fragment,{key:t},r.a.createElement("label",{htmlFor:"rating-".concat(parseInt(t,10)+1)},parseInt(t,10)+1),r.a.createElement("input",{type:"radio",name:"rating",id:"rating-".concat(parseInt(t,10)+1),value:parseInt(t,10)+1,onChange:a,checked:parseInt(e.value,10)===parseInt(t,10)+1}))}))};function k(e){return 100*e}var W=Object(O.a)((function(e){var t=Object(n.useState)({name:"",price:"",type:"red",rating:""}),a=Object(y.a)(t,2),c=a[0],l=a[1],m=function(e){"name"===e.target.name?l(Object(i.a)({},c,{name:e.target.value})):"type"===e.target.name?l(Object(i.a)({},c,{type:e.target.value})):"price"===e.target.name&&l(Object(i.a)({},c,{price:e.target.value}))};return r.a.createElement("form",{onSubmit:function(t){t.preventDefault();c.price;c.price=k(c.price),e.addWine(c),e.history.push("/")}},r.a.createElement("fieldset",null,r.a.createElement("h1",null,"Add a new wine"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",id:"name",name:"name",value:c.name,onChange:m})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"type"},"Type"),r.a.createElement("select",{id:"type",name:"type",value:c.type,onChange:m},r.a.createElement("option",{value:"red"},"Red"),r.a.createElement("option",{value:"white"},"White"),r.a.createElement("option",{value:"ros\b\xe9"},"Ros\b\xe9"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("div",{className:"input-wrapper"},r.a.createElement("span",{className:"currency"},"$"),r.a.createElement("input",{name:"price",type:"text",id:"price",value:c.price,onChange:m}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("h2",null,"Rating"),r.a.createElement(j,{numberOfStars:"5",onClick:function(e){l(Object(i.a)({},c,{rating:e}))},value:c.rating})),r.a.createElement("button",{type:"submit"},"Add wine")))}));var S=Object(O.a)((function(e){var t=Object(n.useState)({name:"",price:"",type:"",rating:""}),a=Object(y.a)(t,2),c=a[0],l=a[1],m=Object(n.useState)(""),o=Object(y.a)(m,2),s=o[0],u=o[1];Object(n.useEffect)((function(){Object.keys(e.wines).map((function(t){return t===e.match.params.wineId&&(l(e.wines[t]),u(e.wines[t].rating)),null}))}),[e.wines,e.match.params.wineId]);var p=function(e){console.log("gotta change something! ",e.target.name," ",e.target.value),"name"===e.target.name?(console.log("the selected wine: ",c),l(Object(i.a)({},c,{name:e.target.value}))):"type"===e.target.name?l(Object(i.a)({},c,{type:e.target.value})):"price"===e.target.name&&l(Object(i.a)({},c,{price:e.target.value}))};return r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a={name:c.name,type:c.type,price:k(parseFloat(c.price)),rating:s};e.updateWine(e.match.params.wineId,a),e.history.push("/")}},r.a.createElement("fieldset",null,r.a.createElement("h1",null,"Edit wine"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",id:"name",name:"name",value:c.name,onChange:p})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"type"},"Type"),r.a.createElement("select",{id:"type",name:"type",value:c.type,onChange:p},r.a.createElement("option",{value:"red"},"Red"),r.a.createElement("option",{value:"white"},"white"),r.a.createElement("option",{value:"rose"},"rose"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("div",{className:"input-wrapper"},r.a.createElement("span",{className:"currency"},"$"),r.a.createElement("input",{type:"text",id:"price",name:"price",value:c.price,onChange:p}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("h2",null,"Rating"),r.a.createElement(j,{numberOfStars:"5",onClick:function(e){u(e)},value:s,onChange:p})),r.a.createElement("button",{type:"submit"},"Save changes")))})),C=a(54);var N=function(e){return e.render()};var I=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(C.a,{to:"/add"},"Add"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("button",{type:"button",onClick:e.sortWines},"Name")),r.a.createElement("th",null,"Type"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Rating"))),r.a.createElement("tbody",null,Object.keys(e.wines).map((function(t){return r.a.createElement(N,{key:t,index:t,wine:e.wines[t],render:function(){return r.a.createElement("tr",null,r.a.createElement("td",null,e.wines[t].name),r.a.createElement("td",null,e.wines[t].type),r.a.createElement("td",null,e.wines[t].price/100),r.a.createElement("td",null,e.wines[t].rating),r.a.createElement("td",null,r.a.createElement(C.a,{to:"/edit/".concat(t)},"Edit")),r.a.createElement("td",null,r.a.createElement("button",{type:"button",onClick:function(){return e.deleteWine(t)}},"Delete")))}})})))))},A=(a(51),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={wines:{}},a.addWine=function(e){var t=Object(i.a)({},a.state.wines);t["wine".concat(Date.now())]=e,a.setState({wines:t})},a.updateWine=function(e,t){var n=Object(i.a)({},a.state.wines);console.log(t),n[e]=t,a.setState({wines:n})},a.deleteWine=function(e){var t=Object(i.a)({},a.state.wines);t[e]=null,a.setState({wines:t})},a.sortWines=function(){var e={},t=Object(i.a)({},a.state.wines);Object.keys(a.state.wines).sort((function(e,t){return a.state.wines[e].name<a.state.wines[t].name?-1:a.state.wines[e].name>a.state.wines[t].name?1:0})).forEach((function(a){e[a]=t[a]}));var n=0;Object.keys(a.state.wines).forEach((function(){t[Object.keys(t)[n]]=e[Object.keys(e)[n]],n+=1})),a.setState({wines:t})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.ref=g.syncState("/wines",{context:this,state:"wines"})}},{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(E.a,null,r.a.createElement(h.a,{exact:!0,path:"/"},r.a.createElement(I,{wines:this.state.wines,deleteWine:this.deleteWine,sortWines:this.sortWines})),r.a.createElement(h.a,{path:"/edit/:wineId"},r.a.createElement(S,{wines:this.state.wines,updateWine:this.updateWine})),r.a.createElement(h.a,{path:"/add"},r.a.createElement(W,{addWine:this.addWine}))))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[30,1,2]]]);
//# sourceMappingURL=main.9f3f43fd.chunk.js.map